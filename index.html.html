<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Clinical Safety Risk Flag Tool</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #f3f6fb;
  }

  .container {
    max-width: 600px;
    margin: 40px auto;
    background: #ffffff;
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
  }

  h1 {
    font-size: 22px;
  }

  .tabs {
    display: flex;
    margin-bottom: 15px;
    border-bottom: 2px solid #ddd;
  }

  .tab {
    padding: 10px 15px;
    cursor: pointer;
    font-weight: bold;
  }

  .tab.active {
    border-bottom: 3px solid #1f6feb;
    color: #1f6feb;
  }

  .section {
    display: none;
  }

  .section.active {
    display: block;
  }

  label {
    margin-top: 12px;
    display: block;
    font-weight: bold;
  }

  input, select {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
  }

  button {
    margin-top: 20px;
    width: 100%;
    padding: 12px;
    background: #1f6feb;
    color: white;
    border: none;
    font-size: 16px;
    border-radius: 5px;
    cursor: pointer;
  }

  .result {
    margin-top: 20px;
    padding: 15px;
    border-radius: 6px;
  }

  .low { background: #e6f7e9; color: #207245; }
  .medium { background: #fff4e5; color: #8a5a00; }
  .high { background: #fdecea; color: #a61d24; }

  ul {
    padding-left: 18px;
  }

  .footer {
    margin-top: 15px;
    font-size: 12px;
    color: #666;
  }
</style>
</head>

<body>

<div class="container">
  <h1>Clinical Safety Risk Flag Tool</h1>

  <div class="tabs">
    <div class="tab active" onclick="openTab('tool')">Tool</div>
    <div class="tab" onclick="openTab('references')">References</div>
  </div>

  <!-- TOOL -->
  <div id="tool" class="section active">

    <label>Age (years)</label>
    <input type="number" id="age">

    <label>Heart Rate (bpm)</label>
    <input type="number" id="hr">

    <label>Systolic Blood Pressure (mmHg)</label>
    <input type="number" id="sbp">

    <label>SpOâ‚‚ (%)</label>
    <input type="number" id="spo2">

    <label>Blood Glucose (mg/dL)</label>
    <input type="number" id="glucose">

    <label>Mobility Status</label>
    <select id="mobility">
      <option value="independent">Independent</option>
      <option value="assisted">Needs Assistance</option>
      <option value="immobile">Immobile</option>
    </select>

    <button onclick="evaluateRisk()">Evaluate Risk</button>

    <div id="result" class="result"></div>
  </div>

  <!-- REFERENCES -->
  <div id="references" class="section">
    <h3>References</h3>
    <ul>
      <li>Royal College of Physicians. <em>National Early Warning Score (NEWS2).</em> 2020.</li>
      <li>NICE. <em>Sepsis: recognition, diagnosis and early management (NG51).</em> Updated 2020.</li>
      <li>World Health Organization. <em>Oxygen therapy for acute hypoxaemia.</em> 2020.</li>
      <li>American Diabetes Association. <em>Standards of Medical Care in Diabetes â€“ Inpatient Glycemic Management.</em> 2020.</li>
      <li>NHS Improvement. <em>Patient Safety Incident Response Framework (PSIRF).</em> 2020.</li>
    </ul>

    <p class="footer">
      References are provided to demonstrate alignment with established patient safety and early warning principles.
    </p>
  </div>

  <div class="footer">
    Prototype only â€“ not intended for direct clinical use
  </div>
</div>

<script>
function openTab(id) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));

  event.target.classList.add('active');
  document.getElementById(id).classList.add('active');
}

function evaluateRisk() {
  const age = Number(age.value);
  const hr = Number(hr.value);
  const sbp = Number(sbp.value);
  const spo2 = Number(spo2.value);
  const glucose = Number(glucose.value);
  const mobility = mobility.value;

  let score = 0;
  let reasons = [];

  if (hr < 50 || hr > 120) { score += 2; reasons.push("Abnormal heart rate"); }
  if (sbp < 90 || sbp > 180) { score += 2; reasons.push("Abnormal blood pressure"); }
  if (spo2 < 92) { score += 3; reasons.push("Low oxygen saturation"); }
  if (glucose < 70 || glucose > 250) { score += 2; reasons.push("Unsafe glucose level"); }
  if (age >= 65 && mobility !== "independent") { score += 2; reasons.push("Age-related mobility risk"); }

  let level, action, css;

  if (score <= 2) { level = "ðŸŸ¢ Low Risk"; action = "Routine monitoring."; css = "low"; }
  else if (score <= 5) { level = "ðŸŸ¡ Monitor Closely"; action = "Increase observation frequency."; css = "medium"; }
  else { level = "ðŸ”´ Escalation Recommended"; action = "Inform physician and escalate care."; css = "high"; }

  result.className = "result " + css;
  result.innerHTML = `
    <strong>Risk Level:</strong> ${level}<br><br>
    <strong>Suggested Action:</strong> ${action}<br><br>
    <strong>Identified Risk Factors:</strong>
    <ul>${reasons.map(r => `<li>${r}</li>`).join("")}</ul>
  `;
}
</script>

</body>
</html>
